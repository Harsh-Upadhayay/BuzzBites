(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4206:function(e,t,r){Promise.resolve().then(r.bind(r,3504))},6473:function(e,t,r){"use strict";var n=r(2265);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class s extends n.Component{constructor(e){let t;super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),t=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){let e=window&&window.innerWidth||1/0,t=this.props.breakpointCols;"object"!=typeof t&&(t={default:parseInt(t)||2});let r=1/0,n=t.default||2;for(let o in t){let a=parseInt(o);a>0&&e<=a&&a<r&&(r=a,n=t[o])}n=Math.max(1,parseInt(n)||1),this.state.columnCount!==n&&this.setState({columnCount:n})}itemsInColumns(){let e=this.state.columnCount,t=Array(e),r=n.Children.toArray(this.props.children);for(let n=0;n<r.length;n++){let o=n%e;t[o]||(t[o]=[]),t[o].push(r[n])}return t}renderColumns(){let{column:e,columnAttrs:t={},columnClassName:r}=this.props,a=this.itemsInColumns(),s=`${100/a.length}%`,i=r;i&&"string"!=typeof i&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===i&&(i="my-masonry-grid_column"));let u=l(l(l({},e),t),{},{style:l(l({},t.style),{},{width:s}),className:i});return a.map((e,t)=>n.createElement("div",o({},u,{key:t}),e))}logDeprecated(e){console.error("[Masonry]",e)}render(){let e=this.props,{children:t,breakpointCols:r,columnClassName:a,columnAttrs:l,column:s,className:i}=e,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),c=i;return"string"!=typeof i&&(this.logDeprecated('The property "className" requires a string'),void 0===i&&(c="my-masonry-grid")),n.createElement("div",o({},u,{className:c}),this.renderColumns())}}s.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},t.Z=s},3504:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(7437),o=r(2265),a=r(6473),l=r(1796);function s(e){let{src:t,alt:r,onClose:o}=e;return(0,n.jsxs)("div",{className:"fixed inset-0 flex justify-center items-center z-50",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gray-800 bg-opacity-50",onClick:o}),(0,n.jsxs)("div",{className:"relative m-2",children:[(0,n.jsx)("button",{className:"absolute top-0 right-0 m-4 text-white",onClick:o,children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:(0,n.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})}),(0,n.jsx)("img",{src:t,alt:r,className:"max-w-screen max-h-svh"})]})]})}function i(){let[e,t]=(0,o.useState)(!1),[r,i]=(0,o.useState)(""),u=e=>{i(e),t(!0)},[c,d]=(0,o.useState)([]),[m,p]=(0,o.useState)(1),[f,h]=(0,o.useState)(!1),[g,b]=(0,o.useState)(!0),w=(0,o.useRef)();return(0,o.useEffect)(()=>{(async()=>{if(g&&!f){h(!0);try{let e=await fetch("/api/memes/?page=".concat(m)),t=await e.json();"Invalid page."===t.detail?b(!1):d(e=>[...e,...t.results])}catch(e){console.error("Error fetching data:",e)}h(!1)}})()},[m]),(0,o.useEffect)(()=>{var e;let t;let r=(e=()=>{let e=Math.min(...Array.from(document.querySelectorAll(".my-masonry-grid_column")).map(e=>e.offsetHeight));w.current&&window.innerHeight+window.scrollY>=e-1e3&&(console.log("reached end"),f||(console.log("page changes"),p(e=>e+1)))},function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];clearTimeout(t),t=setTimeout(()=>e.apply(this,n),300)});return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.Z,{breakpointCols:{default:4,768:3,500:2,100:1},className:"my-masonry-grid",columnClassName:"my-masonry-grid_column h-auto",children:[c.map((e,t)=>(0,n.jsx)(l.J,{className:"mt-8 cursor-pointer h-auto max-w-full rounded-lg",src:e.img_url,alt:"meme photo",placeholder:"blur",blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mN8/PBOPQAIcAMh5LCUAAAAAABJRU5ErkJggg==",width:500,height:500,onClick:()=>u(e.img_url)},e.id)),(0,n.jsx)("div",{ref:w})]}),e&&(0,n.jsx)(s,{src:r,alt:"Meme",onClose:()=>{i(""),t(!1)}})]})}},1796:function(e,t,r){"use strict";r.d(t,{J:function(){return m}});var n=r(2265),o=r(4291),a=(0,r(5487).tv)({slots:{wrapper:"relative shadow-black/5",zoomedWrapper:"relative overflow-hidden rounded-inherit",img:"relative z-10 opacity-0 shadow-black/5 data-[loaded=true]:opacity-100",blurredImg:["absolute","z-0","inset-0","w-full","h-full","object-cover","filter","blur-lg","scale-105","saturate-150","opacity-30","translate-y-1"]},variants:{radius:{none:{},sm:{},md:{},lg:{},full:{}},shadow:{none:{wrapper:"shadow-none",img:"shadow-none"},sm:{wrapper:"shadow-small",img:"shadow-small"},md:{wrapper:"shadow-medium",img:"shadow-medium"},lg:{wrapper:"shadow-large",img:"shadow-large"}},isZoomed:{true:{img:["object-cover","transform","hover:scale-125"]}},showSkeleton:{true:{wrapper:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2"],img:"opacity-0"}},disableAnimation:{true:{img:"transition-none"},false:{img:"transition-transform-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{radius:"lg",shadow:"none",isZoomed:!1,isBlurred:!1,showSkeleton:!1,disableAnimation:!1},compoundSlots:[{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"none",class:"rounded-none"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"full",class:"rounded-full"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"sm",class:"rounded-small"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"md",class:"rounded-md"},{slots:["wrapper","img","blurredImg","zoomedWrapper"],radius:"lg",class:"rounded-large"}]}),l=r(3908),s=r(5142),i=r(4808),u=(null==globalThis?void 0:globalThis.document)?n.useLayoutEffect:n.useEffect,c=r(7437),d=(0,o.Gp)((e,t)=>{let{Component:r,domRef:d,slots:m,classNames:p,isBlurred:f,isZoomed:h,fallbackSrc:g,removeWrapper:b,disableSkeleton:w,getImgProps:v,getWrapperProps:y,getBlurredImgProps:C}=function(e){let[t,r]=(0,o.oe)(e,a.variantKeys),{ref:c,as:d,src:m,className:p,classNames:f,loading:h,isBlurred:g,fallbackSrc:b,isLoading:w,disableSkeleton:v=!!b,removeWrapper:y=!1,onError:C,onLoad:A,srcSet:j,sizes:k,crossOrigin:O,...x}=t,N=function(e={}){let{loading:t,src:r,srcSet:o,onLoad:a,onError:l,crossOrigin:s,sizes:i,ignoreFallback:c}=e,[d,m]=(0,n.useState)("pending");(0,n.useEffect)(()=>{m(r?"loading":"pending")},[r]);let p=(0,n.useRef)(),f=(0,n.useCallback)(()=>{if(!r)return;h();let e=new Image;e.src=r,s&&(e.crossOrigin=s),o&&(e.srcset=o),i&&(e.sizes=i),t&&(e.loading=t),e.onload=e=>{h(),m("loaded"),null==a||a(e)},e.onerror=e=>{h(),m("failed"),null==l||l(e)},p.current=e},[r,s,o,i,a,l,t]),h=()=>{p.current&&(p.current.onload=null,p.current.onerror=null,p.current=null)};return u(()=>{if(!c)return"loading"===d&&f(),()=>{h()}},[d,f,c]),c?"loaded":d}({src:m,loading:h,onError:C,onLoad:A,ignoreFallback:!1,srcSet:j,sizes:k,crossOrigin:O}),E="loaded"===N&&!w,I="loading"===N||w,P=e.isZoomed,S=(0,l.gy)(c),{w:D}=(0,n.useMemo)(()=>({w:t.width?"number"==typeof t.width?"".concat(t.width,"px"):t.width:"fit-content"}),[null==t?void 0:t.width]),z=(!m||!E)&&!!b,_=I&&!v,W=(0,n.useMemo)(()=>a({...r,showSkeleton:_}),[...Object.values(r),_]),F=(0,s.W)(p,null==f?void 0:f.img),M=(0,n.useCallback)(()=>{let e=z?{backgroundImage:"url(".concat(b,")")}:{};return{className:W.wrapper({class:null==f?void 0:f.wrapper}),style:{...e,maxWidth:D}}},[W,z,b,null==f?void 0:f.wrapper]),U=(0,n.useCallback)(()=>({src:m,"aria-hidden":(0,i.PB)(!0),className:W.blurredImg({class:null==f?void 0:f.blurredImg})}),[W,m,null==f?void 0:f.blurredImg]);return{Component:d||"img",domRef:S,slots:W,classNames:f,isBlurred:g,disableSkeleton:v,fallbackSrc:b,removeWrapper:y,isZoomed:P,isLoading:I,getImgProps:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.W)(F,null==e?void 0:e.className);return{src:m,ref:S,"data-loaded":(0,i.PB)(E),className:W.img({class:t}),loading:h,srcSet:j,sizes:k,crossOrigin:O,...x}},getWrapperProps:M,getBlurredImgProps:U}}({...e,ref:t}),A=(0,c.jsx)(r,{ref:d,...v()});if(b)return A;let j=(0,c.jsx)("div",{className:m.zoomedWrapper({class:null==p?void 0:p.zoomedWrapper}),children:A});return f?(0,c.jsxs)("div",{...y(),children:[h?j:A,(0,n.cloneElement)(A,C())]}):h||!w||g?(0,c.jsxs)("div",{...y(),children:[" ",h?j:A]}):A});d.displayName="NextUI.Image";var m=d},5142:function(e,t,r){"use strict";function n(...e){for(var t,r,o=0,a="";o<e.length;)(t=e[o++])&&(r=function e(t){var r,n,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t){if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(n=e(t[r]))&&(o&&(o+=" "),o+=n);else for(r in t)t[r]&&(o&&(o+=" "),o+=r)}return o}(t))&&(a&&(a+=" "),a+=r);return a}r.d(t,{W:function(){return n}})}},function(e){e.O(0,[212,971,69,744],function(){return e(e.s=4206)}),_N_E=e.O()}]);